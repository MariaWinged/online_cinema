# Онлайн кинотеатр
Проект представляет собой реализацию бэкенда онлайн кинотеатра.

### Реализованные сервисы:
+ admin_panel - админ панель на джанго с бд postgres. 
  + Локальный адрес prod: http://127.0.0.1/admin
  + Локальный адрес dev: http://127.0.0.1:8000/admin
+ etl - etl сервис для передачи данных из бд в индексы elasticsearch
+ fastapi_solution - пользовательский API.
  + Локальный адрес prod: http://127.0.0.1/api/v1/ .
  + Документация prod: http://127.0.0.1/api/openapi# .
  + Локальный адрес dev: http://127.0.0.1:4000/api/v1/ .
  + Документация dev: http://127.0.0.1:4000/api/openapi# .

### Тесты:
+ fastapi_solution/tests - тесты пользовательского API

### Сборка проекта:
Сборка производится в docker-compose с помощью make. В файле infrastructure/Makefile в переменную DC_ENV_FILE нужно
подставить значение соответствующего docker-compose:
+ DC_PROD_FILE - сборка для прода
+ DC_DEV_FILE - сборка для разработки
+ DC_TEST_FILE - сборка для запуска тестов

Далее необходимо создать и заполнить файлы prod.env, dev.env, test.env в директории infrastructure/envs,
основываясь на файле env.example. Переменные, содержащие названия серверов и портов сервисов менять не нужно.

Чтобы собрать проект, заполнить начальными данными и запустить с нуля, необходимо последовательно запустить команды make в папке infrastructure:
+ make build_up
+ make web-initial (только для prod и dev)
+ make pipewatch-data (только для prod и dev)

В дальнейшем для запуска проекта можно ограничиться командами:
+ make up
+ make watch-data

Для проверки результатов тестов и общего просмотра логов используется команда **_make logs_**

## Участники проекта
+ [Мария Карасева](https://github.com/MariaWinged) - тимлид, разрабатывала сервис etl, сервисы и тесты для API жанров, архитектуру fastapi_solution
+ [Дарья Кузмич](https://github.com/Darya-Kuzmich) - разрабатывала сервис django, сервисы и тесты для API фильмов и персоналий, инфраструктуру тестов
